const offset=25;function easeInOutCubic(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}function handleFragment(t){if(!t)return;const e=document.getElementById(t);if(!e)return;const n=window.scrollY,o=e.getBoundingClientRect().top+window.scrollY-25,r=Math.abs(o-n),a=Math.min(1500,300+.4*r),i=performance.now();requestAnimationFrame(function t(e){const r=e-i,s=Math.min(r/a,1),c=easeInOutCubic(s),l=n+(o-n)*c;window.scrollTo({top:l,behavior:"auto"}),s<1&&requestAnimationFrame(t)}),document.querySelectorAll(".target-highlight").forEach(t=>{t.classList.remove("target-highlight")}),/^fn(:|ref:)/.test(t)&&e.classList.add("target-highlight")}document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add("smooth-fragments");const t=window.location.hash.substring(1);t&&handleFragment(t)}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){const e=this.getAttribute("href").substring(1);e&&(t.preventDefault(),handleFragment(e),history.pushState(null,"",`#${e}`))})});